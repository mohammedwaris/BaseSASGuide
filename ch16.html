<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>


<style>
     td,th{
       padding: 3px;
     }
     .color-red{
       color: red;
     }
     .color-blue{
       color: blue;
     }
     .underline{ text-decoration: underline;}

     .diagram{
         max-width: 100%;
     }
</style>

</head>
<body>

<div id="content">

  <!-- Topic 1 -->
  <h2 class="topic" id="topic1">Overview</h2>

  <!-- Topic 1 Subtopic1 -->
  <h3 class="subtopic" id="topic1_subtopic1">Introduction</h3>

  <p>In DATA step programming, you often need to perform the same action on more than one
     variable. Although you can process variables individually, it is easier to handle them as a group.
     You can do this by using array processing.
  </p>
  <p>For example, using an array and DO loop, the program below eliminates the need for 365
     separate programming statements to convert the daily temperature from Fahrenheit to Celsius for
     the year.
  </p>
  <pre>
  data work.report (drop=i);
     set master.temps;
     array daytemp{365} day1-day365;
     do i=1 to 365;
        daytemp{i}=5*(daytemp{i}-32)/9;
     end;
  run;</pre>

  <p>You can use arrays to simplify the code needed to</p>
  <ul>
    <li>perform repetitive calculations</li>
    <li>create many variables that have the same attributes</li>
    <li>read data</li>
    <li>rotate SAS data sets by changing variables to observations or observations to variables</li>
    <li>compare variables</li>
    <li>perform a table lookup</li>
  </ul>

  <p>This chapter teaches you how to define an array and how to reference elements of the array in
     the DATA step.
  </p>
  
  <!-- Topic 1 Subtopic2 -->
  <h3 class="subtopic" id="topic1_subtopic2">Objectives</h3>
  <p>In this chapter, you learn to</p>
  <ul>
    <li>group variables into one- and two-dimensional arrays</li>
    <li>perform an action on array elements</li>
    <li>create new variables with an ARRAY statement</li>
    <li>assign initial values to array elements</li>
    <li>create temporary array elements with an ARRAY statement</li>
  </ul>

  <!-- Topic 2 -->
  <h2 class="topic" id="topic2">Creating One-Dimensional Arrays</h2>

  <!-- Topic 2 Subtopic1 -->
  <h3 class="subtopic" id="topic2_subtopic1">Understanding SAS Arrays</h3>

  <p>A SAS <strong>array</strong> is a temporary grouping of SAS variables under a single name. An array exists only
     for the duration of the DATA step.
  </p>
  <img src="images/ch16_image1.png" class="diagram" />
  <p>One reason for using an array is to reduce the number of statements that are required for
     processing variables. For example, in the DATA step below, the values of seven data set
     variables are converted from Fahrenheit to Celsius temperatures.
  </p>
  <pre>
  data work.report;
     set master.temps;
     mon=5*(mon-32)/9;
     tue=5*(tue-32)/9;
     wed=5*(wed-32)/9;
     thr=5*(thr-32)/9;
     fri=5*(fri-32)/9;
     sat=5*(sat-32)/9;
     sun=5*(sun-32)/9;
  run;</pre>
  
  <p>As you can see, the assignment statements perform the same calculation on each variable in this
     series of statements. Only the name of the variable changes in each statement.
  </p>
  <p>By grouping the variables into a one-dimensional array, you can process the variables in a DO
     loop. You use fewer statements, and the DATA step program is more easily modified or
     corrected.
  </p>
  <pre>
  data work.report(drop=i);
     set master.temps;
     array wkday{7} mon tue wed thr fri sat sun;
     do i=1 to 7;
        wkday{i}=5*(wkday{i}-32)/9;
     end;
  run;</pre>
  <p>You will learn other uses for arrays in this chapter.</p>

  <!-- Topic 2 Subtopic2 -->
  <h3 class="subtopic" id="topic2_subtopic2">General Form of an Array</h3>
  <p>To group previously defined data set variables into an array, use an ARRAY statement.</p>
  <hr/>
  <p><strong>General form, ARRAY statement:</strong></p>
  <p><strong>ARRAY</strong> array-name{dimension} &lt;elements&gt;;</p>
  <p>where</p>
  <ul>
    <li><i>array-name</i> specifies the name of the array</li>
    <li><i>dimension</i> describes the number and arrangement of array elements. The default
        dimension is one
    </li>
    <li><i>elements</i> lists the variables to include in the array. Array elements must be either all
        numeric or all character. If no elements are listed, new variables will be created with default
        names
    </li>
  </ul>
  <table>
    <tr>
      <th class="color-red">Warning</th>
      <td>Do not give an array the same name as a variable in the same DATA step.
          Also, avoid using the name of a SAS function; the array will be correct, but
          you won't be able to use the function in the same DATA step, and a
          warning message will appear in the SAS log
      </td>
    </tr>
  </table>
  <table>
    <tr>
      <th class="color-red">Warning</th>
      <td>You cannot use array names in LABEL, FORMAT, DROP, KEEP, or
          LENGTH statements. Arrays exist only for the duration of the DATA step.
          They do not become part of the output data set
      </td>
    </tr>
  </table>
  <hr/>

  <p>For example, in the data set <strong>Finance.Sales91</strong>, you might want to process the variables <i>Qtr1,
     Qtr2, Qtr3,</i> and <i>Qtr4</i> in the same way.
  </p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="3">Description of Finance.Sales91</th>
    </tr>
    <tr>
      <th class="color-red">Variable</th>
      <th class="color-red">Type</th>
      <th class="color-red">Length</th>
    </tr>
    <tr>
      <td>SalesRep</td>
      <td>char</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Qtr1</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Qtr2</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Qtr3</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Qtr4</td>
      <td>num</td>
      <td>8</td>
    </tr>
  </table>

  <br/><br/>
  <h4>Specifying the Array Name</h4>
  <p>To group the variables in the array, first give the array a name. In this example, make the array
     name <i>sales</i>.
  </p>
  <pre>array sales{4} qtr1 qtr2 qtr3 qtr4;</pre>

  <h4>Specifying the Dimension</h4>
  <p>Following the array name, you must specify the dimension of the array. The dimension describes
     the number and arrangement of elements in the array. There are several ways to specify the
     dimension.
  </p>
  <ul>
    <li>In a one-dimensional array, you can simply specify the number of array elements. The
        array elements are the existing variables that you want to reference and process elsewhere
        in the DATA step.
    </li>
    <li>array sales{4} qtr1 qtr2 qtr3 qtr4;</li>
    <li>The dimension of an array doesn’t have to be the number of array elements. You can
        specify a range of values for the dimension when you define the array. For example, you can
        define the array sales as follows:<br/>
        array sales{96:99} totals96 totals97 totals98 totals99;
    </li>
    <li>You can also indicate the dimension of a one-dimensional array by using an asterisk (*).
        This way, SAS determines the dimension of the array by counting the number of elements.<br/>
        array sales{*} qtr1 qtr2 qtr3 qtr4;
    </li>
    <li>Enclose the dimension in either parentheses, braces, or brackets.</li>
    <li>()</li>
    <li>array sales{4} qtr1 qtr2 qtr3 qtr4;</li>
    <li>[]</li>
  </ul>

  <h4>Specifying Array Elements</h4>
  <p>When specifying the elements of an array, you can list each variable name that you want to
     include in the array. When listing elements, separate each element with a space. As with all SAS
     statements, you end the ARRAY statement with a semicolon (;).
  </p>
  <pre>array sales{4} qtr1 qtr2 qtr3 qtr4;</pre>
  <p>You can also specify array elements as a variable list. Here is an example of an ARRAY
     statement that groups the variables Qtr1 through Qtr4 into a one-dimensional array, using a
     variable list.
  </p>
  <pre>array sales{4} qtr1-qtr4;</pre>

  <p>Let's look more closely at array elements that are specified as variable lists.</p>

  <!-- Topic 2 Subtopic 3 -->
  <h3 class="subtopic" id="topic2_subtopic3">Variable Lists as Array Elements</h3>
  <p>You can specify variable lists in the forms shown below. Each type of variable list is explained in
     more detail following the table.
  </p>
  <table border="1">
    <tr>
      <th class="color-red">Variables</th>
      <th class="color-red">Form</th>
    </tr>
    <tr>
      <td>a numbered range of variables</td>
      <td>Var1-Varn</td>
    </tr>
    <tr>
      <td>all numeric variables</td>
      <td>_NUMERIC_</td>
    </tr>
    <tr>
      <td>all character variables</td>
      <td>_CHARACTER_</td>
    </tr>
    <tr>
      <td>all variables</td>
      <td>_ALL_</td>
    </tr>
  </table>
  <br/><br/>
  <h4>Specifying a Numbered Range of Variables</h4>
  
  <p>Qtr1 Qtr2 Qtr3 Qtr4 -> Qtr1-Qtr4</p>
  <p>When specifying a numbered range of variables,</p>
  <ul>
    <li>the variables must have the same name except for the last character or characters</li>
    <li>the last character of each variable must be numeric</li>
    <li>the variables must be numbered consecutively</li>
  </ul>
  <pre>array sales{4} qtr1-qtr4;</pre>
  <p>In the preceding example, you would use <i>sales{4}</i> to reference <i>Qtr4</i>. However, the index of an
     array doesn't have to range from one to the number of array elements. You can specify a range
     of values for the index when you define the array. For example, you can define the array <i>sales</i>
     as follows:
  </p>
  <pre>array sales{96:99} totals96-totals99;</pre>
  
  <h4>Specifying All Numeric Variables</h4>
  <p>Amount Rate Term -> _NUMERIC_</p>
  <p><i>_NUMERIC_</i> specifies all numeric variables that have already been defined in the current DATA
     step.
  </p>
  <pre>array sales{*} _numeric_;</pre>

  <h4>Specifying All Character Variables</h4>
  <p>FrstName LastName Address -> _CHARACTER_</p>
  <p><i>_CHARACTER_</i> specifies all character variables that have already been defined in the current
     DATA step.
  </p>
  <pre>array sales{*} _character_;</pre>

  <h4>Specifying All Variables</h4>
  <p>FrstName LastName Address Amount Rate Term -> _ALL_</p>
  <p><i>_ALL_</i> specifies all variables of the same type (all character or all numeric) that have been
     defined in the current DATA step.
  </p>
  <pre>array sales{*} _all_;</pre>
  
  <!-- Topic 2 Subtopic 4 -->
  <h3 class="subtopic" id="topic2_subtopic4">Referencing Elements of an Array</h3>
  <p>Now let's look at some ways you can use arrays to process variables in the DATA step.</p>
  <pre>
  data work.report(drop=i);
     set master.temps;
     array wkday{7} mon tue wed thr fri sat sun;
     do i=1 to 7;
        if wkday{i}>95 then output;
     end;
  run;</pre>

  <pre>
  data work.weights(drop=i);
     set master.class;
     array wt{6} w1-w6;
     do i=1 to 6;
        wt{i}=wt{i}*2.2;
     end;
  run;</pre>

  <pre>
  data work.new(drop=i);
     set master.synyms;
     array term{9} also1-also9;
     do i=1 to 9;
        if term{i} ne ' ' then output;
     end;
  run;</pre>

  <p>The ability to reference the elements of an array by an index value is what gives arrays their
     power. Typically, arrays are used with DO loops to process multiple variables and to perform
     repetitive calculations.
  </p>

  <pre>
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{i}*1.2;
  end;</pre>

  <p>When you define an array in a DATA step, an index value is assigned to each array element. The
     index values are assigned in the order of the array elements.
  </p>

  <pre>
                    1   2   3   4
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{i}*1.2;
  end;</pre>

  <p>You use an <strong>array reference</strong> to perform an action on an array element during execution. To
     reference an array element in the DATA step, specify the name of the array, followed by an index
     value enclosed in brackets.
  </p>

  <hr/>
  <p><strong>General form, ARRAY reference:</strong></p>
  <p><i>array-name{index value}</i></p>
  <p>where <i>index value</i></p>
  <ul>
    <li>is enclosed in parentheses, braces, or brackets</li>
    <li>specifies an integer, a numeric variable, or a SAS numeric expression</li>
    <li>is within the lower and upper bounds of the dimension of the array</li>
  </ul>
  <hr/>

  <p>When used in a DO loop, the index variable of the iterative DO statement can reference each
     element of the array.
  </p>
  <pre>
  array quarter {4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=qtr{i}*1.2;
  end;</pre>

  <p>For example, the DO loop above increments the index variable <i>i</i> from the lower bound of the
     <i>quarter</i> array, <i>1</i>, to the upper bound, <i>4</i>. The following sequence illustrates this process:
  </p>
  <pre>
                    1
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{1}*1.2;
  end;

                        2
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{2}*1.2;
  end;

                            3
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{3}*1.2;
  end;

                                4
  array quarter{4} jan apr jul oct;
  do i=1 to 4;
     YearGoal=quarter{4}*1.2;
  end;</pre>

  <p>During each iteration of the DO loop, <i>quarter{i}</i> refers to an element of the array <i>quarter</i> in
     the order listed.
  </p>

  <!-- Topic 2 Subtopic5 -->
  <h3 class="subtopic" id="topic2_subtopic5">Compilation and Execution</h3>

  <p>Let's look at another example of a DATA step that contains an array with a DO loop.</p>
  <p>The Health Center of a company conducts a fitness class for its employees. Each week,
     participants are weighed so that they can monitor their progress. The weight data, currently
     stored in kilograms, needs to be converted to pounds.
  </p>
  <table border="1">
    <tr>
       <th class="color-red" colspan="7">SAS Data Set Hrd.Fitclass</th>
    </tr>
    <tr>
       <th class="color-red">Name</th>
       <th class="color-red">Weight1</th>
       <th class="color-red">Weight2</th>
       <th class="color-red">Weight3</th>
       <th class="color-red">Weight4</th>
       <th class="color-red">Weight5</th>
       <th class="color-red">Weight6</th>
    </tr>
    <tr>
      <td>Alicia</td>
      <td>69.6</td>
      <td>68.9</td>
      <td>68.8</td>
      <td>67.4</td>
      <td>66.0</td>
      <td>66.2</td>
    </tr>
    <tr>
      <td>Betsy</td>
      <td>52.6</td>
      <td>52.6</td>
      <td>51.7</td>
      <td>50.4</td>
      <td>49.8</td>
      <td>49.1</td>
    </tr>
    <tr>
      <td>Brenda</td>
      <td>68.6</td>
      <td>67.6</td>
      <td>67.0</td>
      <td>66.4</td>
      <td>65.8</td>
      <td>65.2</td>
    </tr>
    <tr>
      <td>Carl</td>
      <td>67.6</td>
      <td>66.6</td>
      <td>66.0</td>
      <td>65.4</td>
      <td>64.8</td>
      <td>64.2</td>
    </tr>
    <tr>
      <td>Carmela</td>
      <td>63.6</td>
      <td>62.5</td>
      <td>61.9</td>
      <td>61.4</td>
      <td>60.8</td>
      <td>58.2</td>
    </tr>
    <tr>
      <td>David</td>
      <td>70.6</td>
      <td>69.8</td>
      <td>69.2</td>
      <td>68.4</td>
      <td>67.8</td>
      <td>67.0</td>
    </tr>
  </table>
  <br/><br/>

  <p>You can use a DO loop to update the variables Weight1 through Weight6 for each observation
     in the <strong>Hrd.Fitclass</strong> data set.
  </p>
  <pre>
  data hrd.convert;
     set hrd.fitclass;
     array wt{6} weight1-weight6;
     do i=1 to 6;
        wt{i}=wt{i}*2.2046;
     end;
  run;</pre>
  <table>
    <tr>
      <th class="color-blue">Note</th>
      <td>The <i>wt{i}</i> that appears on the right side of the equal sign (=) is an array
          reference, not a variable name, so it does not violate the rule against having
          the same variable and array name in a DATA step.
      </td>
    </tr>
  </table>
  <br/><br/>

  <p>To understand how the DO loop processes the array elements, let's examine the compilation and
     execution phases of this DATA step.
  </p>
  <p>During compilation, the program data vector is created for the <strong>Hrd.Convert</strong> data set.</p>
  <img src="images/ch16_image2.png" class="diagram"/>

  <p>The DATA step is scanned for syntax errors. If there are any syntax errors in the ARRAY
     statement, they are detected at this time.
  </p>
  <p>The index values of the array elements are assigned. Note that the array name and the array
     references are not included in the program data vector. The array name and array references
     exist only for the duration of the DATA step.
  </p>
  <p>During the first iteration of the DATA step, the first observation in Hrd.Fitclass is read into the
     program data vector.
  </p>
  <pre>
  data hrd.convert;
     set hrd.fitclass;
     array wt{6} weight1-weight6;
     do i=1 to 6;
        wt{i}=wt{i}*2.2046;
     end;
  run;</pre>

  <img src="images/ch16_image3.png" class="diagram"/>
  <p>Because the ARRAY statement is a compile-time only statement, it is ignored during execution.
     The DO loop is executed next.
  </p>
  <p>During the first iteration of the DO loop, the index variable <i>i</i> is set to <i>1</i>. As a result, the array
     reference <i>wt{i}</i> becomes <i>wt{1}</i>. Because <i>wt{1}</i> refers to the first array element, <i>Weight1</i>,
     the value of <i>Weight1</i> is converted from kilograms to pounds.
  </p>

  <pre>
  data hrd.convert;
     set hrd.fitclass;
     array wt{6} weight1-weight6;
     do i=1 to 6;
        wt{i}=wt{i}*2.2046;
     end;
  run;</pre>
  <img src="images/ch16_image4.png" class="diagram"/>  
  <p>As the DATA step continues its DO loop iterations, the index variable i is changed from <i>1</i> to <i>2, 3,
     4, 5,</i> and <i>6</i>, causing <i>Weight2</i> through <i>Weight6</i> to receive new values in the program data
     vector, as shown below.
  </p>
  <img src="images/ch16_image5.png" class="diagram"/>  

  <!-- Topic 2 Subtopic 6 -->
  <h3 class="subtopic" id="topic2_subtopic6">Using the DIM Function in an Iterative DO Statement</h3>
  <p>You can also use the <strong>DIM</strong> function to return the number of elements in the array. When using DO
     loops to process arrays, you can use the DIM function in the TO clause of the iterative DO
     statement. For a one-dimensional array, specify the array name as the argument for the DIM
     function.
  </p>
  <hr/>
  <p><strong>General form, DIM function:</strong></p>
  <p><strong>DIM</strong>(array-name)</p>
  <p>where array-name specifies the array</p>
  <hr/>

  <p>In this example, <i>dim(wt)</i> returns a value of 6.</p>
  <pre>
  data hrd.convert;
     set hrd.fitclass;
     array wt{*} weight1-weight6;
     do i=1 to dim(wt);
        wt{i}=wt{i}*2.2046;
     end;
  run;</pre>
  <p>When you use the DIM function, you do not have to re-specify the stop value of an iterative DO
     statement if you change the dimension of the array.
  </p>
  <pre>
  data hrd.convert;                   data hrd.convert;
     set hrd.fitclass;                   set hrd.fitclass;
     array wt{*} weight1-weight6;        array wt{*} weight1-weight10;
     do i=1 to dim(wt);                  do i=1 to dim(wt) ;
        wt{i}=wt(i)*2.2046;                  wt{i}=wt{i}*2.2046;
     end;                                end;
  run;                                run;</pre>
  

  <!-- Topic 3 -->
  <h1 class="topic" id="topic3">Expanding Your Use of Arrays</h3>

  <!-- Topic 3 Subtopic 1 -->
  <h3 class="subtopic" id="topic3_subtopic1">Creating Variables in an ARRAY Statement</h3>

  <p>So far you have learned several ways to reference existing variables in an ARRAY statement.
     You can also create variables in an ARRAY statement by omitting the array elements from the
     statement. Because you are not referencing existing variables, SAS automatically creates the
     variables for you and assigns default names to them.
  </p>
  <hr/>
    <p><strong>General form, ARRAY statement to create new variables:</strong></p>
    <p><strong>ARRAY</strong> <i>array-name{dimension}</i>;</p>
    <p>where</p>
    <ul>
      <li><i>array-name</i> specifies the name of the array</li>
      <li><i>dimension</i> describes the number and arrangement of array elements. The default
          dimension is <strong>1</strong>
      </li>
    </ul>
  <hr/>

  <p>For example, suppose you need to calculate the weight gain or loss from week to week for each
     member of a fitness class, as shown below.
  </p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="7">SAS Data Set Hrd.Convert</th>
    </tr>
    <tr>
      <th class="color-red">Name</th>
      <th class="color-red">Weight1</th>
      <th class="color-red">Weight2</th>
      <th class="color-red">Weight3</th>
      <th class="color-red">Weight4</th>
      <th class="color-red">Weight5</th>
      <th class="color-red">Weight6</th>
    </tr>
    <tr>
      <td>Alicia</td>
      <td>153.4</td>
      <td>151.9</td>
      <td>151.7</td>
      <td>148.6</td>
      <td>145.5</td>
      <td>145.9</td>
    </tr>
    <tr>
      <td>Betsy</td>
      <td>116.0</td>
      <td>116.0</td>
      <td>114.0</td>
      <td>111.1</td>
      <td>109.8</td>
      <td>108.2</td>
    </tr>
    <tr>
      <td>Brenda</td>
      <td>151.2</td>
      <td>149.0</td>
      <td>147.7</td>
      <td>146.4</td>
      <td>145.1</td>
      <td>143.7</td>
    </tr>
    <tr>
      <td>Carl</td>
      <td>149.0</td>
      <td>146.8</td>
      <td>145.5</td>
      <td>144.2</td>
      <td>142.9</td>
      <td>141.5</td>
    </tr>
    <tr>
      <td>Carmela</td>
      <td>140.2</td>
      <td>137.8</td>
      <td>136.5</td>
      <td>135.4</td>
      <td>134.0</td>
      <td>128.3</td>
    </tr>
  </table>

  <br/><br/>
  <p>You'd like to create variables that contain this weekly difference. To perform the calculation, you
     first group the variables <i>Weight1</i> through <i>Weight6</i> into an array.
  </p>
  <pre>
  data hrd.diff;
     set hrd.convert;
     array wt{6} weight1-weight6;</pre>
  <p>Next, you want to create the new variables to store the differences between the six recorded
     weights. You can use an additional ARRAY statement without elements to create the new
     variables.
  </p>

  <pre>
  data hrd.diff;
     set hrd.convert;
     array wt{6} weight1-weight6;
     array WgtDiff{5};</pre>

  <table border="1">
    <tr>
      <th class="color-red" colspan="7">SAS Data Set Hrd.Convert</th>
    </tr>
    <tr>
      <th class="color-red">Name</th>
      <th class="color-red">Weight1</th>
      <th class="color-red">Weight2</th>
      <th class="color-red">Weight3</th>
      <th class="color-red">Weight4</th>
      <th class="color-red">Weight5</th>
      <th class="color-red">Weight6</th>
    </tr>
    <tr>
      <td>Alicia</td>
      <td>153.4</td>
      <td><- 1 -> 151.9</td>
      <td><- 2 -> 151.7</td>
      <td><- 3 -> 148.6</td>
      <td><- 4 -> 145.5</td>
      <td><- 5 -> 145.9</td>
    </tr>
    <tr>
      <td>Betsy</td>
      <td>116.0</td>
      <td>116.0</td>
      <td>114.0</td>
      <td>111.1</td>
      <td>109.8</td>
      <td>108.2</td>
    </tr>
    <tr>
      <td>Brenda</td>
      <td>151.2</td>
      <td>149.0</td>
      <td>147.7</td>
      <td>146.4</td>
      <td>145.1</td>
      <td>143.7</td>
    </tr>
    <tr>
      <td>Carl</td>
      <td>149.0</td>
      <td>146.8</td>
      <td>145.5</td>
      <td>144.2</td>
      <td>142.9</td>
      <td>141.5</td>
    </tr>
    <tr>
      <td>Carmela</td>
      <td>140.2</td>
      <td>137.8</td>
      <td>136.5</td>
      <td>135.4</td>
      <td>134.0</td>
      <td>128.3</td>
    </tr>
  </table>

  <br/><br/>

  <p>Remember, when creating variables in an ARRAY statement, you do not need to specify array
     elements as long as you specify how many elements will be in the array.
  </p>
  <pre>array WgtDiff{5};</pre>

  <h4>Creating Default Variable Names</h4>
  <p>SAS creates default variable names by concatenating the array name and the numbers 1, 2, 3,
     and so on, up to the array dimension.
  </p>

  <img src="images/ch16_image6.png" class="diagram" />
  <table>
    <tr>
      <th class="color-blue">Note</th>
      <td>If you prefer, you can specify individual variable names. To specify variable
          names, you list each name as an element of the array. The following ARRAY
          statement creates the numeric variables <i>Oct12, Oct19, Oct26, Nov02</i>, and
          <i>Nov09</i>
      </td>
    </tr>
  </table>

  <pre>array WgtDiff{5} Oct12 Oct19 Oct26 Nov02 Nov09;</pre>
  <img src="images/ch16_image7.png" class="diagram" />

  <h4>Creating Arrays of Character Variables</h4>

  <p>To create an array of character variables, add a dollar sign ($) after the array dimension.</p>
  <pre>array firstname{5} $;</pre>
  <p>By default, all character variables that are created in an ARRAY statement are assigned a length
       of 8. You can assign your own length by specifying the length after the dollar sign.
  </p>
  <pre>array firstname{5} $ 24;</pre>
  <p>The length that you specify is automatically assigned to all variables that are created by the
     ARRAY statement.
  </p>

  <h4>Using an ARRAY Statement with an Iterative DO Statement</h4>
  <p>During the compilation of the DATA step, the variables that this ARRAY statement creates are
     added to the program data vector and are stored in the resulting data set.
  </p>
  <pre>
  data hrd.diff;
     set hrd.convert;
     array wt{6} Weight1-Weight6;
     array WgtDiff{5};</pre>
  

  <img src="images/ch16_image8.png" class="diagram" />
  <table>
    <tr>
      <th class="color-red">Warning</th>
      <td>When referencing the array elements, be careful not to confuse the array
          references <i>WgtDiff{1}</i> through <i>WgtDiff{5}</i> (note the braces) with
          the <strong>variable names</strong> <i>WgtDiff1</i> through <i>WgtDiff5</i>. The program data
          vector below shows the relationship between the array references and the
          corresponding variable names
      </td>
    </tr>
  </table>
  <br/><br/>
  <img src="images/ch16_image9.png" class="diagram" />
 
  <p>Now you can use a DO loop to calculate the differences between each of the recorded weights.
     Notice that each value of <i>WgtDiff{i}</i> is calculated by subtracting <i>wt{i}</i> from <i>wt(i+1)</i>. By
     manipulating the index variable, you can easily reference any array element
  </p>
  <pre>
  data hrd.diff;
     set hrd.convert;
     array wt{6} weight1-weight6;
     array WgtDiff{5};
     do i=1 to 5;
        wgtdiff{i}=wt{i+1}-wt{i};
     end;
  run;</pre>

  <p>A portion of the resulting data set is shown below.</p>
  <table borer="1">
    <tr>
      <th class="color-red" colspan="6">SAS Data Set Hrd.Diff</th>
    </tr>
    <tr>
      <th class="color-red">Name</th>
      <th class="color-red">WgtDiff1</th>
      <th class="color-red">WgtDiff2</th>
      <th class="color-red">WgtDiff3</th>
      <th class="color-red">WgtDiff4</th>
      <th class="color-red">WgtDiff5</th>
    </tr>
    <tr>
      <td>Alicia</td>
      <td>-1.54322</td>
      <td>-0.22046</td>
      <td>-3.08644</td>
      <td>-3.08644</td>
      <td>0.44092</td>
    </tr>
    <tr>
      <td>Betsy</td>
      <td>0.00000</td>
      <td>-1.98414</td>
      <td>-2.86598</td>
      <td>-1.32276</td>
      <td>-1.54322</td>
    </tr>
    <tr>
      <td>Brenda</td>
      <td>-2.20460</td>
      <td>-1.32276</td>
      <td>-1.32276</td>
      <td>-1.32276</td>
      <td>-1.32276</td>
    </tr>
  </table>
  <br/><br/>

  <!-- Topic 3 Subtopic 2 -->
  <h3 class="subtopic" id="topic3_subtopic2">Assigning Initial Values to Arrays</h3>
  <p>Sometimes it is useful to assign initial values to elements of an array when you define the array.</p>
  <pre>array goal{4} g1 g2 g3 g4 (initial values);</pre>
  <p>Here is an example:</p>
  <pre>array goal{4} g1 g2 g3 g4 (9000 9300 9600 9900);</pre>

  <p>To assign initial values in an ARRAY statement,</p>
  <ul>
    <li>place the values after the array elements</li>
    <li>specify one initial value for each corresponding array element</li>
    <li>separate each value with a comma or blank</li>
    <li>enclose the initial values in parentheses</li>
  </ul>

  <p>Enclose each character value in quotation marks</p>
  <pre>array col{3} $ color1-color3 ('red','green','blue');</pre>
  <p>It's also possible to assign initial values to an array without specifying each array element. The
     following statement creates the variables <i>Var1, Var2, Var3</i>, and <i>Var4</i>, and assigns them initial
     values of <i>1, 2, 3</i>, and <i>4</i>:
  </p>
  
  <pre>array Var{4} (1 2 3 4);</pre>
  <p>For this example, assume that you have the task of comparing the actual sales figures in the
     <strong>Finance.Qsales</strong> data set to the sales goals for each sales representative at the beginning of the
     year. The sales goals are not recorded in <strong>Finance.Qsales</strong>.
  </p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="3">Description of Finance.Qsales</th>
    </tr>
    <tr>
      <th class="color-red">Variable</th>
      <th class="color-red">Type</th>
      <th class="color-red">Length</th>
    </tr>
    <tr>
      <td>SalesRep</td>
      <td>char</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Sales1</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Sales2</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Sales3</td>
      <td>num</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Sales4</td>
      <td>num</td>
      <td>8</td>
    </tr>
  </table>
  <br/><br/>
  <p>The DATA step below reads the <strong>Finance.Qsales</strong> data set to create the <strong>Finance.Report</strong> data set.
     The ARRAY statement creates an array to process sales data for each quarter.
  </p>
  <pre>
  data finance.report;
     set finance.qsales;
     array sale{4} sales1-sales4;</pre>

  <p>To compare the actual sales to the sales goals, you must create the variables for the sales goals
     and assign values to them.
  </p>
  <pre>
  data finance.report;
     set finance.qsales;
     array sale{4} sales1-sales4;
     array Goal{4} (9000 9300 9600 9900);</pre>

  <p>A third ARRAY statement creates the variables <i>Achieved1</i> through <i>Achieved4</i> to store the
     comparison of actual sales versus sales goals.
  </p>

  <pre>
  data finance.report;
     set finance.qsales;
     array sale{4} sales1-sales4;
     array Goal{4} (9000 9300 9600 9900);
     array Achieved{4};
     do i=1 to 4;
        achieved{i}=100*sale{i}/goal{i};
     end;
  run;</pre>

  <p>A DO loop executes four times to calculate the value of each element of the <i>achieved</i> array
     (expressed as a percentage).
  </p>
  
  <pre>
  data finance.report;
     set finance.qsales;
     array sale{4} sales1-sales4;
     array Goal{4} (9000 9300 9600 9900);
     array Achieved{4};
     do i=1 to 4;
        achieved{i}=100*sale{i}/goal{i};
     end;
  run;</pre>

  <p>Before submitting this DATA step, you can drop the index variable from the new data set by
     adding a DROP= option to the DATA statement.
  </p>

  <pre>
  data finance.report(drop=i);
     set finance.qsales;
     array sale{4} sales1-sales4;
     array Goal{4} (9000 9300 9600 9900);
     array Achieved{4};
     do i=1 to 4;
        achieved{i}=100*sale{i}/goal{i};
     end;
  run;</pre>

  <p>This is an example of a simple <i>table-lookup</i> program. The resulting data set contains the
     variables that were read from <i>Finance.Qsales</i>, plus the eight variables that were created with
     ARRAY statements.
  </p>

  <table border="1">
    <tr>
      <th class="color-red" colspan="7">SAS Data Set Finance.Report</th>
    </tr>
    <tr>
      <th class="color-red">SalesRep</th>
      <th class="color-red">Sales1</th>
      <th class="color-red">Sales2</th>
      <th class="color-red">Sales3</th>
      <th class="color-red">Sales4</th>
      <th class="color-red">Goal1</th>
      <th class="color-red">Goal2</th>
    </tr>
    <tr>
      <td>Britt</td>
      <td>8400</td>
      <td>8800</td>
      <td>9300</td>
      <td>9800</td>
      <td>9000</td>
      <td>9300</td>
    </tr>
    <tr>
      <td>Fruchten</td>
      <td>9500</td>
      <td>9300</td>
      <td>9800</td>
      <td>8900</td>
      <td>9000</td>
      <td>9300</td>
    </tr>
    <tr>
      <td>Goodyear</td>
      <td>9150</td>
      <td>9200</td>
      <td>9650</td>
      <td>11000</td>
      <td>9000</td>
      <td>9300</td>
    </tr>
  </table>
  <br/>

  <table border="1">
    <tr>
      <th class="color-red">Goal3</th>
      <th class="color-red">Goal4</th>
      <th class="color-red">Achieved1</th>
      <th class="color-red">Achieved2</th>
      <th class="color-red">Achieved3</th>
      <th class="color-red">Achieved4</th>
    </tr>
    <tr>
      <td>9600</td>
      <td>9900</td>
      <td>93.333</td>
      <td>94.624</td>
      <td>96.875</td>
      <td>98.990</td>
    </tr>
    <tr>
      <td>9600</td>
      <td>9900</td>
      <td>105.556</td>
      <td>100.000</td>
      <td>102.083</td>
      <td>89.899</td>
    </tr>
    <tr>
      <td>9600</td>
      <td>9900</td>
      <td>101.667</td>
      <td>98.925</td>
      <td>100.521</td>
      <td>111.111</td>
    </tr>
  </table>

  <br/>
  <table>
   <tr>
     <th class="color-blue">Note</th>
     <td>Variables to which initial values are assigned in an ARRAY
         statement are automatically retained
     </td>
   </tr>
  </table>
  <br/><br/>
  <p>The variables <i>Goal1</i> through <i>Goal4</i> should not be stored in the data set, because they are
     needed only to calculate the values of <i>Achieved1</i> through <i>Achieved4</i>. The next example
     shows you how to create temporary array elements.
  </p>

  <!-- Topic 3 Subtopic 3 -->
  <h3 class="subtopic" id="topic3_subtopic3">Creating Temporary Array Elements</h3>
  <p>To create temporary array elements for DATA step processing without creating new variables,
     specify <strong>_TEMPORARY_</strong> after the array name and dimension.
  </p>
  <pre>
  data finance.report;
     set finance.qsales;
     array sale{4} sales1-sales4;
     array goal{4} _temporary_ (9000 9300 9600 9900);
     array Achieved{4};
     do i=1 to 4;
        achieved{i}=100*sale{i}/goal{i};
     end;
  run;</pre>

  <p>Temporary array elements do not appear in the resulting data set.</p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="5">SAS Data Set Finance.Report</th>
    </tr>
    <tr>
      <th class="color-red">SalesRep</th>
      <th class="color-red">Sales1</th>
      <th class="color-red">Sales2</th>
      <th class="color-red">Sales3</th>
      <th class="color-red">Sales4</th>
    </tr>
    <tr>
      <td>Britt</td>
      <td>8400</td>
      <td>8800</td>
      <td>9300</td>
      <td>9800</td>
    </tr>
    <tr>
      <td>Fruchten</td>
      <td>9500</td>
      <td>9300</td>
      <td>9800</td>
      <td>8900</td>
    </tr>
    <tr>
      <td>Goodyear</td>
      <td>9150</td>
      <td>9200</td>
      <td>9650</td>
      <td>11000</td>
    </tr>
  </table>
  <br/>
  <table border="1">
    <tr>
      <th class="color-red">Achieved1</th>
      <th class="color-red">Achieved2</th>
      <th class="color-red">Achieved3</th>
      <th class="color-red">Achieved4</th>
    </tr>
    <tr>
      <td>93.333</td>
      <td>94.624</td>
      <td>96.875</td>
      <td>98.990</td>
    </tr>
    <tr>
      <td>105.556</td>
      <td>100.000</td>
      <td>102.083</td>
      <td>89.899</td>
    </tr>
    <tr>
      <td>101.667</td>
      <td>98.925</td>
      <td>100.521</td>
      <td>111.111</td>
    </tr>
  </table>
 
  <p>Temporary array elements are useful when the array is needed only to perform a calculation. You
     can improve performance time by using temporary array elements.
  </p>

  <!-- Topic 3 Subtopic 4 -->
  <h3 class="subtopic" id="topic3_subtopic4">Understanding Multidimensional Arrays</h3>
  <p>So far you have learned how to group variables into one-dimensional arrays. You can also group
     variables into table-like structures called <strong>multidimensional</strong> arrays. This section teaches you how
     to define and use two-dimensional arrays, which are a common type of multidimensional array.
  </p>
  <p>Suppose you want to write a DATA step to compare responses on a quiz to the correct answers.
     As long as there is only one correct answer per question, this is a simple one-to-one comparison.
  </p>

  <i>
  <p>Resp1 -> Answer1</p>
  <p>Resp2 -> Answer2</p>
  <p>Resp3 -> Answer3</p>
  <p>Resp4 -> Answer4</p>
  </i>

  <p>However, if there is more than one correct answer per question, you must compare each
     response to each possible correct answer in order to determine whether there is a match.
  </p>
  <i>
  <p>Resp1 -> Answer1 Answer2 Answer3</p>
  <p>Resp2 -> Answer4 Answer5 Answer6</p>
  <p>Resp3 -> Answer7 Answer8 Answer9</p>
  <p>Resp4 -> Answer10 Answer11 Answer12</p>
  </i>
  
  <p>You can process the above data more easily by grouping the Answer variables into a twodimensional
     array. Think of a one-dimensional array as a single row of variables, as in this
     example:
  <p>
  <p><strong>Answer1 Answer2 Answer3 Answer4 ... Answer9 Answer10 Answer11 Answer12</strong></p>
  <p>And think of a two-dimensional array as <strong>multiple rows of variables</strong>, as in this example:</p>
  <i>
  <p>Answer1 Answer2 Answer3</p>
  <p>Answer4 Answer5 Answer6</p>
  <p>Answer7 Answer8 Answer9</p>
  <p>Answer10 Answer11 Answer12</p>
  </i>

  <!-- Topic 3 Subtopic 5 -->
  <h3 class="subtopic" id="topic3_subtopic5">Defining a Multidimensional Array</h3>
  <p>To define a multidimensional array, you specify the number of elements in each dimension,
     separated by a comma. This ARRAY statement defines a two-dimensional array:
  </p>

  <pre>array new{3,4} x1-x12;</pre>
  <p>In a two-dimensional array, the two dimensions can be thought of as a table of rows and columns.</p>
  <pre>array new{r,c} x1-x12;</pre>
  <img src="images/ch16_image10.png" class="diagram" />
  
  <p>The first dimension in the ARRAY statement specifies the number of rows.</p>
  <pre>array new{3,4} x1-x12;</pre>
  <img src="images/ch16_image11.png" class="diagram" />
  <p>The second dimension specifies the number of columns.</p>  
  <pre>array new{3,4} x1-x12;</pre>
  <img src="images/ch16_image12.png" class="diagram" />

  <p>You can reference any element of the array by specifying the two dimensions. In the example
     below, you can perform an action on the variable <i>x7</i> by specifying the array reference <i>new{2,3}</i>.
     You can easily locate the array element in the table by finding the row (2), then the column (3).
  </p>

  <pre>
  array new{3,4} x1-x12;
  new{2,3}=0;</pre>

  <img src="images/ch16_image13.png" class="diagram" />
  <p>When you define a two-dimensional array, the array elements are grouped in the order in which
     they are listed in the ARRAY statement. For example, the array elements x1 through x4 can be
     thought of as the first row of the table.
  </p>
  <pre>array new{3,4} x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12;</pre>
  <img src="images/ch16_image14.png" class="diagram" />

  <p>The elements x5 through x8 become the second row of the table, and so on.</p>
  <pre>array new{3,4} x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12;</pre>
  <img src="images/ch16_image15.png" class="diagram" />

  <!-- Topic 3 Subtopic 6 -->
  <h3 class="subtopic" id="topic3_subtopic6">Example: Referencing Elements of a Two-Dimensional Array</h3>

  <p>Multidimensional arrays are typically used with <strong>nested DO loops</strong>. The next example uses a onedimensional
     array, a two-dimensional array, and a nested DO loop to restructure a set of
     variables.
  </p>
  <p>Your company's sales figures are stored by month in the SAS data set <strong>Finance.Monthly</strong>. Your
     task is to generate a new data set of quarterly sales rather than monthly sales.
  </p>

  <table border="1">
    <tr>
      <th class="color-red" colspan="3">Description of Finance.Monthly</th>
    </tr>
    <tr>
      <th class="color-red">Variable</th>
      <th class="color-red">Type</th>
      <th class="color-red">Length</th>
    </tr>
    <tr>
      <td>Year</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month1</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month2</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month3</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month4</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month5</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month6</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month7</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month8</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month9</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month10</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month11</td>
      <td>num</td>
      <td>8</td>
    </tr> 
    <tr>
      <td>Month12</td>
      <td>num</td>
      <td>8</td>
    </tr> 
  <table>
  <br/><br/>
  <p>Defining the array <i>m{4,3}</i> puts the variables <i>Month1</i> through <i>Month12</i> into four groups of three
     months (yearly quarters).
  </p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="3">Table Representation: of m Array</th>
    </tr>
    <tr>
      <td>Month1</td>
      <td>Month2</td>
      <td>Month3</td>
    </tr>
    <tr>
      <td>Month4</td>
      <td>Month5</td>
      <td>Month6</td>
    </tr>
    <tr>
      <td>Month7</td>
      <td>Month8</td>
      <td>Month9</td>
    </tr>
    <tr>
      <td>Month10</td>
      <td>Month11</td>
      <td>Month12</td>
    </tr>
  </table>
  <br/><br/>
  <pre>
  data finance.quarters;
     set finance.monthly;
     array m{4,3} month1-month12;</pre>

  <p>Defining the array <i>Qtr{4}</i> creates the numeric variables <i>Qtr1, Qtr2, Qtr3, Qtr4</i>, which will
     be used to sum the sales for each quarter.
  </p>
  <pre>
  data finance.quarters;
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};</pre>

  <p>A nested DO loop is used to reference the values of the variables <i>Month1</i> through <i>Month12</i> and
     to calculate the values of <i>Qtr1</i> through <i>Qtr4</i>. Because the variables <i>i</i> and <i>j</i> are used only for
     loop processing, the DROP= option is used to exclude them from the <strong>Finance.Quarters</strong> data set.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;
        qtr{i}=0;
        do j=1 to 3;
           qtr{i}+m{i,j};
        end;
     end;
  run;</pre>

  <p>Each element in the <i>Qtr</i> array represents the sum of one row in the <i>m</i> array. The number of
     elements in the <i>Qtr</i> array should match the first dimension of the <i>m</i> array (that is, the number of 
     rows in the <i>m</i> array). The first DO loop executes once for each of the four elements of the <i>Qtr</i>
     array.
  </p>

  <p>The assignment statement, <i>qtr{i}=0</i>, sets the value of <i>qtr{i}</i> to zero after each iteration of
     the first DO loop. Without the assignment statement, the values of <i>Qtr1, Qtr2, Qtr3</i>, and
     <i>Qtr4</i> would accumulate across iterations of the DATA step due to the <i>qtr{i}+m{i,j}</i> Sum
     statement within the DO loop.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;
        qtr{i}=0;
        do j=1 to 3;
           qtr{i}+m{i,j};
        end;
     end;
  run;</pre>

  <p>The second DO loop executes the same number of times as the second dimension of the m array
     (that is, the number of columns in each row of the m array).
  </p>
  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;
        qtr{i}=0;
        do j=1 to 3;
           qtr{i}+m{i,j};
        end;
     end;
  run;</pre>

  <p>To see how the nested DO loop processes these arrays, let's examine the execution of this DATA
     step.
  </p>
  <p>When this DATA step is compiled, the program data vector is created. The PDV contains the
     variables <i>Year, Month1</i> through <i>Month12</i>, and the new variables <i>Qtr1</i> through <i>Qtr4</i>. (Only
     the beginning and ending portions of the program data vector are represented here.)
  </p>
  
  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;
        qtr{i}=0;
        do j=1 to 3;
           qtr{i}+m{i,j};
        end;
     end;
  run;</pre>

  <img src="images/ch16_image16.png" class="diagram" />
  
  <p>During the first execution of the DATA step, the values of the first observation of
     Finance.Monthly are read into the program data vector. When the first DO loop executes the first
     time, the index variable i is set to 1.
  </p>
  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     &gt; do i=1 to 4;        i=1
          qtr{i}=0;
          do j=1 to 3;
             qtr{i}+m{i,j};
          end;
       end;
  run;</pre>

  <img src="images/ch16_image17.png" class="diagram" />

  <p>During the first iteration of the nested DO loop, the value of <i>Month1</i>, which is referenced by
     <i>m{i,j}</i>, is added to <i>Qtr1</i>.
  </p>
  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;             i=1
        qtr{i}=0;
        &gt; do j=1 to 3;     j=1
                qtr{1}+m{1,1};
        end;
     end;
  run;</pre>

  <img src="images/ch16_image18.png" class="diagram" />

  <p>During the second iteration of the nested DO loop, the value of <i>Month2</i>, which is referenced by <i>m</i>
     <i>{i,j}</i>, is added to <i>Qtr1</i>.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;              i=1
        qtr{i}=0;
        &gt; do j=1 to 3;      j=2
                qtr{1}+m{1,2};
        end;
     end;
  run;</pre>

  <img src="images/ch16_image19.png" class="diagram" />

  <p>The nested DO loop continues to execute until the index variable <i>j</i> exceeds the stop value, 3.
     When the nested DO loop completes execution, the total sales for the first quarter, <i>Qtr1</i>, have
     been computed.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     do i=1 to 4;               i=1
        qtr{i}=0;
        &gt; do j=1 to 3;       j=3
                qtr{1}+m{1,3};
        end;
     end;
  run;</pre>

  <img src="images/ch16_image20.png" class="diagram" />

  <p>The outer DO loop increments <i>i</i> to 2, and the process continues for the array element <i>Qtr2</i> and
     the <i>m</i> array elements <i>Month4</i> through <i>Month6</i>.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     &gt; do i=1 to 4;    i=2
        qtr{i}=0;
        do j=1 to 3;      j=1
           qtr{i}+m{i,j};
        end;
     end;
  run;</pre>

  <img src="images/ch16_image21.png" class="diagram" />

  <p>After the outer DO loop completes execution, the end of the DATA step is reached, and the
     variable values for the first observation are written to the data set <strong>Finance.Quarters</strong>.
  </p>

  <pre>
  data finance.quarters(drop=i j);
     set finance.monthly;
     array m{4,3} month1-month12;
     array Qtr{4};
     &gt; do i=1 to 4;           i=5 (loop ends)
             qtr{i}=0;
             do j=1 to 3;
                qtr{i}+m{i,j};
             end;
     end;
  run;</pre>

  <img src="images/ch16_image22.png" class="diagram" />

  <p>What you have seen so far represents the first iteration of the DATA step. All observations in the
     data set <strong>Finance.Monthly</strong> are processed in the same manner. Below is a portion of the resulting
     data set, which contains the sales figures grouped by quarters.
  </p>

  <table border="1">
    <tr>
      <th class="color-red" colspan="5">SAS Data Set Finance.Quarters (Partial Listing)</th>
    </tr>
    <tr>
      <th class="color-red">Year</th>
      <th class="color-red">Qtr1</th>
      <th class="color-red">Qtr2</th>
      <th class="color-red">Qtr3</th>
      <th class="color-red">Qtr4</th>
    </tr>
    <tr>
      <td>1989</td>
      <td>69100</td>
      <td>64400</td>
      <td>69200</td>
      <td>71800</td>
    </tr>
    <tr>
      <td>1990</td>
      <td>73100</td>
      <td>72000</td>
      <td>83200</td>
      <td>82800</td>
    </tr>
    <tr>
      <td>1991</td>
      <td>73400</td>
      <td>81800</td>
      <td>85200</td>
      <td>87800</td>
    </tr>
  </table>

  <!--  Topic 4 -->
  <h2 class="topic" id="topic4">Additional Features</h2>

  <p>You've seen a number of uses for arrays, including creating variables, performing repetitive
     calculations, and performing table lookups. You can also use arrays for rotating (transposing) a
     SAS data set.
  </p>
  <p>When you rotate a SAS data set, you change variables to observations or observations to
     variables. For example, suppose you want to rotate the <strong>Finance.Funddrive</strong> data set to create
     four output observations from each input observation.
  </p>
  <table border="1">
    <tr>
      <th class="color-red" colspan="5">SAS Data Set Finance.Funddrive</th>
    </tr>
    <tr>
      <th class="color-red">LastName</th>
      <th class="color-red">Qtr1</th>
      <th class="color-red">Qtr2</th>
      <th class="color-red">Qtr3</th>
      <th class="color-red">Qtr4</th>
    </tr>
    <tr>
      <td>ADAMS</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>20</td>
    </tr>
    <tr>
      <td>ALEXANDE</td>
      <td>15</td>
      <td>18</td>
      <td>15</td>
      <td>10</td>
    </tr>
    <tr>
      <td>APPLE</td>
      <td>25</td>
      <td>25</td>
      <td>25</td>
      <td>25</td>
    </tr>
    <tr>
      <td>ARTHUR</td>
      <td>10</td>
      <td>25</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td>AVERY</td>
      <td>15</td>
      <td>15</td>
      <td>15</td>
      <td>15</td>
    </tr>
    <tr>
      <td>BAREFOOT</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
    </tr>
    <tr>
      <td>BAUCOM</td>
      <td>25</td>
      <td>20</td>
      <td>20</td>
      <td>30</td>
    </tr>
    <tr>
      <td>BLAIR</td>
      <td>10</td>
      <td>10</td>
      <td>5</td>
      <td>10</td>
    </tr>
    <tr>
      <td>BLALOCK</td>
      <td>5</td>
      <td>10</td>
      <td>10</td>
      <td>15</td>
    </tr>
    <tr>
      <td>BOSTIC</td>
      <td>20</td>
      <td>25</td>
      <td>30</td>
      <td>25</td>
    </tr>
    <tr>
      <td>BRADLEY</td>
      <td>12</td>
      <td>16</td>
      <td>14</td>
      <td>18</td>
    </tr>    <tr>
      <td>BRADY</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
    </tr>
    <tr>
      <td>BROWN</td>
      <td>18</td>
      <td>18</td>
      <td>18</td>
      <td>18</td>
    </tr>
    <tr>
      <td>BRYANT</td>
      <td>16</td>
      <td>18</td>
      <td>20</td>
      <td>18</td>
    </tr>
    <tr>
      <td>BURNETTE</td>
      <td>10</td>
      <td>10</td>
      <td>10</td>
      <td>10</td>
    </tr>
    <tr>
      <td>CHEUNG</td>
      <td>30</td>
      <td>30</td>
      <td>30</td>
      <td>30</td>
    </tr>
    <tr>
      <td>LEHMAN</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
      <td>20</td>
    </tr>
    <tr>
      <td>VALADEZ</td>
      <td>14</td>
      <td>18</td>
      <td>40</td>
      <td>25</td>
    </tr>
  </table>
  <br/><br/>
  <p>The following program rotates the data set and lists the first 16 observations in the new data set.</p>

  <pre>
  data work.rotate(drop=qtr1-qtr4);
     set finance.funddrive;
     array contrib{4} qtr1-qtr4;
     do Qtr=1 to 4;
        Amount=contrib{qtr};
        output;
     end;
  run;

  proc print data=rotate(obs=16) noobs;
  run;</pre>

  <table border="1">
    <tr>
      <th class="color-red">LastName</th>
      <th class="color-red">Qtr</th>
      <th class="color-red">Amount</th>
    </tr>
    <tr>
      <td>ADAMS</td>
      <td>1</td>
      <td>18</td>
    </tr>
    <tr>
      <td>ADAMS</td>
      <td>2</td>
      <td>18</td>
    </tr>
    <tr>
      <td>ADAMS</td>
      <td>3</td>
      <td>20</td>
    </tr>
    <tr>
      <td>ADAMS</td>
      <td>4</td>
      <td>20</td>
    </tr>
    <tr>
      <td>ALEXANDER</td>
      <td>1</td>
      <td>15</td>
    </tr>
    <tr>
      <td>ALEXANDER</td>
      <td>2</td>
      <td>18</td>
    </tr>
    <tr>
      <td>ALEXANDER</td>
      <td>3</td>
      <td>15</td>
    </tr>
    <tr>
      <td>ALEXANDER</td>
      <td>4</td>
      <td>10</td>
    </tr>
    <tr>
      <td>APPLE</td>
      <td>1</td>
      <td>25</td>
    </tr>
    <tr>
      <td>APPLE</td>
      <td>2</td>
      <td>25</td>
    </tr>
    <tr>
      <td>APPLE</td>
      <td>3</td>
      <td>25</td>
    </tr>
    <tr>
      <td>APPLE</td>
      <td>4</td>
      <td>25</td>
    </tr>
    <tr>
      <td>ARTHUR</td>
      <td>1</td>
      <td>10</td>
    </tr>
    <tr>
      <td>ARTHUR</td>
      <td>2</td>
      <td>25</td>
    </tr>
    <tr>
      <td>ARTHUR</td>
      <td>3</td>
      <td>20</td>
    </tr>
    <tr>
      <td>ARTHUR</td>
      <td>4</td>
      <td>30</td>
    </tr>
  </table>

  <!-- Topic 5 -->
  <h2 class="topic" id="topic5">Summary</h2>

  <!-- Topic 5 Subtopic 1 -->
  <h3 class="subtopic" id="topic5_subtopic1">Text Summary</h3>

  <h4>Purpose of SAS Arrays</h4>
  <p>An array is a temporary grouping of variables under a single name. This can reduce the number
     of statements that are needed to process variables and can simplify the maintenance of DATA
     step programs.
  </p>

  <h4>Defining an Array</h4>
  <p>To group previously defined data set variables into an array, use an ARRAY statement that
     specifies the array's name, its dimension enclosed in braces, brackets, or parentheses, and the
     elements to include. For example: <i>array sales{4} qtr1 qtr2 qtr3 qtr4;</i>
  </p>

  <h4>Variable Lists as Array Elements</h4>
  <p>You can use a variable list to specify array elements. Depending on the form of the variable list,
     it can specify all numeric or all character variables, or a numbered range of variables.
  </p>
  
  <h4>Referencing Elements of an Array</h4>
  <p>When you define an array in a DATA step, an index value is assigned to each element. During
     execution, you can use an <strong>array reference</strong> to perform actions on specific array elements. When
     used in a DO loop, for example, the index variable of the iterative DO statement can reference
     each element of the array.
  </p>

  <h4>The DIM Function</h4>
  <p>When using DO loops to process arrays, you can also use the DIM function in the TO clause of
     the iterative DO statement. When you use the DIM function, you do not have to re-specify the
     stop value of a DO statement if you change the dimension of the array.
  </p>

  <h4>Creating Variables with the ARRAY Statement</h4>
  <p>If you don't specify array elements in an ARRAY statement, SAS automatically creates the
     variables for you by concatenating the array name and the numbers 1, 2, 3... up to the array
     dimension. To create an array of character variables, add a dollar sign ($) after the array
     dimension. By default, all character variables that are created with an ARRAY statement are
     assigned a length of 8. However, you can specify a different length after the dollar sign.
  </p>

  <h4>Assigning Initial Values to Arrays</h4>
  <p>To assign <strong>initial values</strong> in an ARRAY statement, place the values in parentheses after the array
     elements, specifying one initial value for each array element and separating each value with a
     comma or blank. To assign initial values to character variables, enclose each value in quotation
     marks and separate the values with commas.
  </p>

  <h4>Creating Temporary Array Elements</h4>
  <p>You can create temporary array elements for DATA step processing without creating additional
     variables. Just specify <strong>_TEMPORARY_</strong> after the array name and dimension. This is useful when
     the array is needed only to perform a calculation.
  </p>

  <h4>Multidimensional Arrays</h4>
  <p>To define a multidimensional array, specify the number of elements in each dimension, separated
     by a comma. For example, array new<i>{3,4} x1-x12;</i> defines a two-dimensional array, with the
     first dimension specifying the number of rows (3) and the second dimension specifying the
     number of columns (4).
  </p>

  <h4>Referencing Elements of a Two-Dimensional Array</h4>
  <p>Multidimensional arrays are typically used with nested DO loops. If a DO loop processes a twodimensional
     array, you can reference any element within the array by specifying the two
     dimensions.
  </p>

  <h4>Rotating Data Sets</h4>
  <p>You can use arrays to rotate a data set. Rotating a data set changes variables to observations or
     observations to variables.
  </p>

  <!-- Topic 5 Subtopic 2 -->
  <h3 class="subtopic" id="topic5_subtopic2">Points to Remember</h3>
  <ul>
    <li>A SAS array exists only for the duration of the DATA step.</li>
    <li>Do not give an array the same name as a variable in the same DATA step. Also, avoid
        using the name of a SAS function as an array name- the array will be correct, but you won't
        be able to use the function in the same DATA step, and a warning will be written to the SAS
        log.
    </li>
    <li>You can indicate the dimension of a one-dimensional array with an asterisk (*) as long as
        you specify the elements of the array.
    </li>
    <li>When referencing array elements, be careful not to confuse variable names with the
        array references. <i>WgtDiff1</i> through <i>WgtDiff5</i> is not the same as <i>WgtDiff{1}</i> through
        <i>WgtDiff{5}</i>.
    </li>
  </ul>

</div> <!-- end of Div content -->
</body>
</html>